<?php 
/**
 * Teknologiaplaneetta - Enterprise Solution
 *
 * LICENSE: Open Source (GNU GPL)
 *
 * @copyright  2007 Teknologiaplaneetta
 * @license    http://www.gnu.org/copyleft/gpl.html  GNU GPL Version 2
 * @version    $Id$ 0.1.5
 * @link       http://www.teknologiaplaneetta.com/
 */ 
?>
<?php
/*
getImage.php
Copyright (C) 2004-2006 Peter Frueh (http://www.ajaxprogrammer.com/)

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
*/

// required param: imageName

global $server_uploads_path;

$editDirectory = $server_uploads_path."edit/";
$imageName = $_GET["imageName"];
if(empty($imageName) || !file_exists($editDirectory.$imageName)) { exit; }

if (stristr( $imageName, ".jpg")) { $output = imagecreatefromjpeg($editDirectory.$imageName); }
if (stristr( $imageName, ".gif")) { $output = imagecreatefromgif($editDirectory.$imageName); }
if (stristr( $imageName, ".png")) { $output = imagecreatefrompng($editDirectory.$imageName); }

if (stristr( $imageName, ".jpg")) { imagejpeg($output, "", 100); }
if (stristr( $imageName, ".gif")) { imagegif($output); }
if (stristr( $imageName, ".png")) { imagepng($output); }

imagedestroy($output);

?>